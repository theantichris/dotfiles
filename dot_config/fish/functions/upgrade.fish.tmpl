function upgrade --description 'Package upgrades (homebrew, pacman/paru, npm -g, go-global-update, uv tools)'
    {{- if and (eq .chezmoi.os "linux") (eq .chezmoi.osRelease.id "cachyos") -}}

    sudo pacman -Syu
    paru -Syu
    {{- end }}

    {{- if eq .chezmoi.os "darwin" }}
    brew update
    brew upgrade
    {{- end }}

    # Go modules/tools (your existing script)
    if type -q go-global-update
        and go-global-update
    end

    # Node global packages
    if type -q npm
        and npm -g update
    end

    # Python standalone tools managed by uv (pipx replacement)
    if type -q uv
        and uv tool upgrade --all
    end
end
